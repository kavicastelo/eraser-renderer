<div class="editor-container">
  <!-- Editor Panel -->
  <div class="editor-panel">
    <h3>Eraser DSL</h3>
    <div #editor class="codemirror-host"></div>
  </div>

  <!-- Viewer Panel -->
  <div class="viewer-panel">
    <div class="toolbar">
      <select [(ngModel)]="diagramType">
        <option *ngFor="let type of diagramTypes" [value]="type">
          {{ type }}
        </option>
      </select>
      <button (click)="fitToView()" title="Fit to view">Fit</button>
      <button (click)="resetZoom()" title="Reset zoom">100%</button>
      <button (click)="toggleTheme()" title="Toggle dark mode">
        <span [innerHTML]="isDark ? 'Light' : 'Dark'"></span>
      </button>
      <button (click)="exportSVG()" title="Export SVG">SVG</button>
      <button (click)="exportPNG()" title="Export PNG">PNG</button>
    </div>

    <diagram-viewer
      [code]="codeText"
      [theme]="isDark ? 'dark' : 'light'"
      [fitOnLoad]="true"
      [diagramType]="diagramType"
      (loaded)="onLoaded($event)"
      (zoomChange)="onZoom($event)"
      #viewer
    ></diagram-viewer>

    <div *ngIf="error" class="error-banner">
      <strong>Error:</strong> {{ error }}
    </div>
  </div>
</div>
